<!DOCTYPE html>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xml:lang="pt-BR" lang="pt-BR"
                template="WEB-INF/template/Layout.xhtml">
    <ui:define name="content">
        <div class="form-container">
            <h2>Novo Usuário</h2>
            <h:form id="containerForm" styleClass="form">
                <p:messages id="msgs" autoUpdate="true" showDetail="true" closable="true"/>

                <p:outputLabel value="Nome:" for="username"/>
                <h:inputText id="username"
                             value="#{userController.users.username}"
                             required="true"
                             requiredMessage="Nome é obrigatório!"
                             pt:placeholder="Digite o nome do usuário">
                    <f:ajax event="keyup" render="saveButton"/>
                </h:inputText>

                <p:outputLabel value="E-mail:" for="email"/>
                <h:inputText id="email"
                             value="#{userController.users.email}"
                             required="true"
                             requiredMessage="E-mail é obrigatório!"
                             pt:type="email" pt:placeholder="email@exemplo.com">
                    <f:ajax event="keyup" render="saveButton"/>
                </h:inputText>

                <h:commandButton id="saveButton" value="Salvar"
                                 action="#{userController.saveUser}"
                                 disabled="#{empty userController.users.username or empty userController.users.email}"
                                 styleClass="btn"/>
            </h:form>
        </div>

        <h:form>
            <p:dataTable value="#{userController.usersList}"
                         var="item"
                         emptyMessage="Nenhum usuário cadastrado."
                         paginator="#{not empty userController.usersList}"
                         rows="5"
                         paginatorPosition="bottom">
                <p:column headerText="Nome">
                    <h:outputText value="#{item.username}"/>
                </p:column>
                <p:column headerText="Email">
                    <h:outputText value="#{item.email}"/>
                </p:column>
            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>